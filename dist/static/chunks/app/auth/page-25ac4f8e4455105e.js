(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{2099:(e,r,t)=>{"use strict";t.d(r,{N:()=>s});let s=(0,t(851).UU)("https://apbgdwgiqrzarwnicguu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwYmdkd2dpcXJ6YXJ3bmljZ3V1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDczOTYzMDgsImV4cCI6MjA2Mjk3MjMwOH0.jrWCdt10IvmdK5FJolNYUFAMBZAttwTqycgGXRj6Isw")},5617:(e,r,t)=>{Promise.resolve().then(t.bind(t,8082))},5695:(e,r,t)=>{"use strict";var s=t(8999);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},8082:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(5155),o=t(2115),a=t(5695),n=t(2099);function l(){let[e,r]=(0,o.useState)(""),[t,l]=(0,o.useState)(""),[i,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(null),[m,g]=(0,o.useState)(!1),[p,h]=(0,o.useState)(!1),[x,b]=(0,o.useState)(null),f=(0,a.useRouter)(),y=async s=>{s.preventDefault(),c(!0),u(null),b(null);try{if(p){let{error:r}=await n.N.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/auth/callback?type=reset-password")});if(r)throw r;b("Check your email for the password reset link")}else if(m){console.log("Starting sign up process...");let{data:s,error:o}=await n.N.auth.signUp({email:e,password:t,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback"),data:{full_name:"",location:"",phone:""}}});if(console.log("Sign up response:",{data:s,error:o}),o)throw o;s.user&&(console.log("User created:",s.user),s.session?(console.log("Session exists, redirecting to profile completion"),f.push("/profile/complete")):(console.log("No session, email confirmation required"),b("Please check your email for the confirmation link. After confirming your email, you will be redirected to complete your profile setup."),r(""),l(""),g(!1)))}else{console.log("Starting sign in process...");let{data:r,error:s}=await n.N.auth.signInWithPassword({email:e,password:t});if(console.log("Sign in response:",{data:r,error:s}),s)throw s;r.session&&(console.log("Session exists, redirecting to profile"),f.push("/profile"))}}catch(e){console.error("Error during auth:",e),u(e instanceof Error?e.message:"An error occurred during authentication")}finally{c(!1)}},w=async()=>{try{let{error:e}=await n.N.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw e}catch(e){u(e.message)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:p?"Reset Password":m?"Create Account":"Sign in to your account"})}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:y,children:[(0,s.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,s.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-800",placeholder:"Email address",value:e,onChange:e=>r(e.target.value)})]}),!p&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:m?"new-password":"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-800",placeholder:"Password",value:t,onChange:e=>l(e.target.value)})]})]}),d&&(0,s.jsx)("div",{className:"text-red-600 dark:text-red-400 text-sm text-center",children:d}),x&&(0,s.jsx)("div",{className:"text-green-600 dark:text-green-400 text-sm text-center",children:x}),(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsx)("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):p?"Send Reset Link":m?"Sign Up":"Sign In"}),(0,s.jsx)("button",{type:"button",onClick:w,className:"w-full flex justify-center py-2 px-4 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Continue with Google"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)("button",{type:"button",onClick:()=>{h(!1),g(!m),u(null),b(null)},className:"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500",children:m?"Already have an account?":"Don't have an account?"})}),!m&&!p&&(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)("button",{type:"button",onClick:()=>h(!0),className:"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500",children:"Forgot your password?"})})]})]})]})})}function i(){return(0,s.jsx)(l,{})}}},e=>{var r=r=>e(e.s=r);e.O(0,[851,441,684,358],()=>r(5617)),_N_E=e.O()}]);