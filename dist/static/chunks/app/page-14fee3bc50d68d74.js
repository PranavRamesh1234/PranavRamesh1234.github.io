(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{413:(e,t,a)=>{Promise.resolve().then(a.bind(a,6753))},2099:(e,t,a)=>{"use strict";a.d(t,{N:()=>i});let i=(0,a(851).UU)("https://apbgdwgiqrzarwnicguu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwYmdkd2dpcXJ6YXJ3bmljZ3V1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDczOTYzMDgsImV4cCI6MjA2Mjk3MjMwOH0.jrWCdt10IvmdK5FJolNYUFAMBZAttwTqycgGXRj6Isw")},6009:()=>{},6753:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var i=a(5155),s=a(2115),r=a(5695),o=a(6874),l=a.n(o),n=a(1934),c=a(1996);a(6298),a(4202),a(6009);var d=a(9207);function x(){let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{let e=await (0,d.zy)();t(e.slice(0,10))}catch(e){console.error("Error fetching featured books:",e)}finally{r(!1)}})()},[]),a)?(0,i.jsx)("div",{className:"w-full h-64 flex items-center justify-center",children:(0,i.jsx)("div",{className:"loading-spinner h-12 w-12"})}):0===e.length?(0,i.jsx)("div",{className:"w-full text-center py-8",children:(0,i.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No books available at the moment."})}):(0,i.jsx)(c.A,{...{dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,autoplay:!0,autoplaySpeed:3e3,arrows:!0,responsive:[{breakpoint:1280,settings:{slidesToShow:3}},{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:640,settings:{slidesToShow:1,arrows:!1}}]},children:e.map(e=>(0,i.jsx)("div",{className:"px-2",children:(0,i.jsx)(n.P.div,{whileHover:{y:-5},className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-md rounded-lg shadow-lg p-4 h-full",children:(0,i.jsxs)(l(),{href:"/books/".concat(e.id),children:[(0,i.jsx)("div",{className:"aspect-[3/4] relative mb-4 overflow-hidden rounded-lg",children:e.images&&e.images.length>0?(0,i.jsx)("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110"}):(0,i.jsx)("div",{className:"w-full h-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:"No image"})})}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:e.title}),(0,i.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2 line-clamp-1",children:e.author}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",e.price.toFixed(2)]}),(0,i.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.condition})]})]})})},e.id))})}let h=[{id:"academic",name:"Academic",icon:"\uD83D\uDCDA"},{id:"fiction",name:"Fiction",icon:"\uD83D\uDCD6"},{id:"non-fiction",name:"Non-Fiction",icon:"\uD83D\uDCD7"},{id:"textbook",name:"Textbooks",icon:"\uD83D\uDCD5"},{id:"reference",name:"Reference",icon:"\uD83D\uDCD8"},{id:"other",name:"Other",icon:"\uD83D\uDCD3"}],m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:260,damping:20}}};function p(){return(0,r.useRouter)(),(0,s.useEffect)(()=>{},[]),(0,i.jsxs)("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[(0,i.jsxs)("section",{className:"relative gradient-bg text-white",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black opacity-20"}),(0,i.jsx)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 md:py-32",children:(0,i.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[(0,i.jsxs)("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:["Buy and Sell Books",(0,i.jsx)("br",{}),(0,i.jsx)("span",{className:"text-yellow-300",children:"Made Simple"})]}),(0,i.jsx)("p",{className:"text-xl md:text-2xl mb-8 text-blue-100",children:"Connect with readers and sellers in your community"}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,i.jsx)(n.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,i.jsx)(l(),{href:"/books",className:"inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-blue-700 bg-white hover:bg-blue-50 transition-colors duration-200",children:"Browse Books"})}),(0,i.jsx)(n.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,i.jsx)(l(),{href:"/sell",className:"inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-500 hover:bg-blue-600 transition-colors duration-200",children:"Sell a Book"})})]})]})})]}),(0,i.jsx)("section",{className:"py-16 bg-gray-50 dark:bg-gray-800",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,i.jsx)(n.P.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:"Featured Books"}),(0,i.jsx)(x,{})]})}),(0,i.jsx)("section",{className:"py-16 bg-white dark:bg-gray-900",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,i.jsx)(n.P.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:"Browse by Category"}),(0,i.jsx)(n.P.div,{variants:m,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:h.map(e=>(0,i.jsx)(n.P.div,{variants:g,whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,i.jsx)(l(),{href:"/books?category=".concat(e.id),children:(0,i.jsxs)("div",{className:"glass-card p-6 text-center hover:bg-blue-50/80 dark:hover:bg-blue-900/80 transition-colors duration-300",children:[(0,i.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400",children:e.name})]})})},e.id))})]})}),(0,i.jsx)("section",{className:"py-16 bg-gray-50 dark:bg-gray-800",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,i.jsx)(n.P.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"text-3xl font-bold text-gray-900 dark:text-white mb-12 text-center",children:"How It Works"}),(0,i.jsxs)(n.P.div,{variants:m,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,i.jsxs)(n.P.div,{variants:g,className:"glass-card p-6 text-center",children:[(0,i.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCDA"}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"List Your Books"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Create listings for books you want to sell with photos and details"})]}),(0,i.jsxs)(n.P.div,{variants:g,className:"glass-card p-6 text-center",children:[(0,i.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDD0D"}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Find Books"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Browse through thousands of books from sellers in your area"})]}),(0,i.jsxs)(n.P.div,{variants:g,className:"glass-card p-6 text-center",children:[(0,i.jsx)("div",{className:"text-4xl mb-4",children:"\uD83E\uDD1D"}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Connect & Trade"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Connect with sellers and arrange to buy or sell books"})]})]})]})})]})}},9207:(e,t,a)=>{"use strict";a.d(t,{QY:()=>r,bp:()=>s,r3:()=>o,zy:()=>l});var i=a(2099);let s=async(e,t)=>{try{let a=[];for(let s of e.images){let e=s.name.split(".").pop(),r="".concat(Math.random(),".").concat(e),o="".concat(t,"/").concat(r),{error:l}=await i.N.storage.from("book-images").upload(o,s);if(l)throw l;let{data:{publicUrl:n}}=i.N.storage.from("book-images").getPublicUrl(o);a.push(n)}let{data:s,error:r}=await i.N.from("books").insert([{title:e.title,author:e.author,description:e.description,price:e.price,condition:e.condition,year_of_publication:e.yearOfPublication,location:e.location,category:e.category,tags:e.tags,images:a,seller_id:t,status:"available",created_at:new Date().toISOString()}]).select().single();if(r)throw r;return s}catch(e){throw console.error("Error in addBook:",e),e}},r=async e=>{console.log("Fetching book with ID:",e);try{let{data:t,error:a}=await i.N.from("books").select("\n        *,\n        seller:profiles!books_seller_id_fkey (\n          id,\n          email,\n          full_name,\n          location,\n          phone_number,\n          avatar_url\n        )\n      ").eq("id",e).single();if(a)throw console.error("Supabase error:",a),a;if(!t)throw console.error("No book found with ID:",e),Error("Book not found");return console.log("Book data:",t),t}catch(e){throw console.error("Error in getBook:",e),e}},o=async(e,t)=>{console.log("Updating book with data:",t);let{images:a,existingImages:s,yearOfPublication:r,...o}=t,l={...o,year_of_publication:r};if(a&&a.length>0){let{data:{user:e}}=await i.N.auth.getUser();if(!e)throw Error("User must be authenticated to update book images");let t=[];for(let s of a){let a=s.name.split(".").pop(),r="".concat(Math.random(),".").concat(a),o="".concat(e.id,"/").concat(r),{error:l}=await i.N.storage.from("book-images").upload(o,s);if(l)throw l;let{data:{publicUrl:n}}=i.N.storage.from("book-images").getPublicUrl(o);t.push(n)}l.images=[...s||[],...t]}let{data:n,error:c}=await i.N.from("books").update(l).eq("id",e).select().single();if(c)throw console.error("Error updating book:",c),c;return n};async function l(e){try{let t=i.N.from("books").select("*").order("created_at",{ascending:!1}),a=null==e?void 0:e.get("q");a&&(t=t.or("title.ilike.%".concat(a,"%,author.ilike.%").concat(a,"%,description.ilike.%").concat(a,"%")));let s=null==e?void 0:e.get("category");s&&(t=t.eq("category",s));let{data:r,error:o}=await t;if(o)throw o;return r||[]}catch(e){throw console.error("Error fetching books:",e),e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[564,851,874,628,58,441,684,358],()=>t(413)),_N_E=e.O()}]);