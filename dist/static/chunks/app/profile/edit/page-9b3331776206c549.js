(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{283:(e,r,t)=>{"use strict";t.d(r,{A:()=>o,AuthProvider:()=>d});var a=t(5155),s=t(2115),l=t(2099);let i=(0,s.createContext)(void 0);function d(e){let{children:r}=e,[t,d]=(0,s.useState)(null),[o,n]=(0,s.useState)(!0);(0,s.useEffect)(()=>{l.N.auth.getSession().then(e=>{let{data:{session:r}}=e;(null==r?void 0:r.user)?u(r.user.id):(d(null),n(!1))});let{data:{subscription:e}}=l.N.auth.onAuthStateChange((e,r)=>{(null==r?void 0:r.user)?u(r.user.id):(d(null),n(!1))});return()=>{e.unsubscribe()}},[]);let u=async e=>{try{let{data:r,error:t}=await l.N.from("profiles").select("*").eq("id",e).single();if(t)throw t;d(r)}catch(e){console.error("Error fetching user profile:",e),d(null)}finally{n(!1)}},c=async(e,r)=>{let{error:t}=await l.N.auth.signInWithPassword({email:e,password:r});if(t)throw t},m=async(e,r)=>{let{data:t,error:a}=await l.N.auth.signUp({email:e,password:r,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});if(a)throw a;if(t.user){let{error:e}=await l.N.from("profiles").insert([{id:t.user.id,email:t.user.email,full_name:"",phone_number:"",location:""}]);if(e)throw e}},h=async()=>{let{error:e}=await l.N.auth.signOut();if(e)throw e},g=async e=>{if(!t)throw Error("No user logged in");let{error:r}=await l.N.from("profiles").update(e).eq("id",t.id);if(r)throw r;d(r=>r?{...r,...e}:null)};return(0,a.jsx)(i.Provider,{value:{user:t,loading:o,signIn:c,signUp:m,signOut:h,updateProfile:g},children:r})}function o(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2099:(e,r,t)=>{"use strict";t.d(r,{N:()=>a});let a=(0,t(851).UU)("https://apbgdwgiqrzarwnicguu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwYmdkd2dpcXJ6YXJ3bmljZ3V1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDczOTYzMDgsImV4cCI6MjA2Mjk3MjMwOH0.jrWCdt10IvmdK5FJolNYUFAMBZAttwTqycgGXRj6Isw")},5163:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(5155),s=t(2115),l=t(5695),i=t(283);function d(){let{user:e,updateProfile:r}=(0,i.A)(),t=(0,l.useRouter)(),[d,o]=(0,s.useState)((null==e?void 0:e.full_name)||""),[n,u]=(0,s.useState)((null==e?void 0:e.phone_number)||""),[c,m]=(0,s.useState)((null==e?void 0:e.location)||""),[h,g]=(0,s.useState)(!1),[x,b]=(0,s.useState)(null);if((0,s.useEffect)(()=>{e||t.push("/auth")},[e,t]),!e)return null;let f=async e=>{e.preventDefault(),g(!0),b(null);try{await r({full_name:d,phone_number:n,location:c}),t.push("/profile")}catch(e){b(e.message)}finally{g(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-lg",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Edit Profile"}),(0,a.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500 dark:text-gray-400",children:"Update your personal information."})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-5 sm:px-6",children:(0,a.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"email",id:"email",value:e.email,disabled:!0,className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-gray-50 dark:bg-gray-700 text-gray-500 dark:text-gray-400"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"text",id:"fullName",value:d,onChange:e=>o(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"tel",id:"phoneNumber",value:n,onChange:e=>u(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Location"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{type:"text",id:"location",value:c,onChange:e=>m(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})})]}),x&&(0,a.jsx)("div",{className:"text-red-500 dark:text-red-400 text-sm",children:x}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>t.push("/profile"),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:h,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:h?"Saving...":"Save Changes"})]})]})})]})})})})}},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},8956:(e,r,t)=>{Promise.resolve().then(t.bind(t,5163))}},e=>{var r=r=>e(e.s=r);e.O(0,[851,441,684,358],()=>r(8956)),_N_E=e.O()}]);