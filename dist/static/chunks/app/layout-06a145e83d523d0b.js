(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{283:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,AuthProvider:()=>n});var r=s(5155),a=s(2115),i=s(2099);let l=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{i.N.auth.getSession().then(e=>{let{data:{session:t}}=e;(null==t?void 0:t.user)?d(t.user.id):(n(null),c(!1))});let{data:{subscription:e}}=i.N.auth.onAuthStateChange((e,t)=>{(null==t?void 0:t.user)?d(t.user.id):(n(null),c(!1))});return()=>{e.unsubscribe()}},[]);let d=async e=>{try{let{data:t,error:s}=await i.N.from("profiles").select("*").eq("id",e).single();if(s)throw s;n(t)}catch(e){console.error("Error fetching user profile:",e),n(null)}finally{c(!1)}},u=async(e,t)=>{let{error:s}=await i.N.auth.signInWithPassword({email:e,password:t});if(s)throw s},m=async(e,t)=>{let{data:s,error:r}=await i.N.auth.signUp({email:e,password:t,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});if(r)throw r;if(s.user){let{error:e}=await i.N.from("profiles").insert([{id:s.user.id,email:s.user.email,full_name:"",phone_number:"",location:""}]);if(e)throw e}},h=async()=>{let{error:e}=await i.N.auth.signOut();if(e)throw e},x=async e=>{if(!s)throw Error("No user logged in");let{error:t}=await i.N.from("profiles").update(e).eq("id",s.id);if(t)throw t;n(t=>t?{...t,...e}:null)};return(0,r.jsx)(l.Provider,{value:{user:s,loading:o,signIn:u,signUp:m,signOut:h,updateProfile:x},children:t})}function o(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},347:()=>{},2099:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});let r=(0,s(851).UU)("https://apbgdwgiqrzarwnicguu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwYmdkd2dpcXJ6YXJ3bmljZ3V1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDczOTYzMDgsImV4cCI6MjA2Mjk3MjMwOH0.jrWCdt10IvmdK5FJolNYUFAMBZAttwTqycgGXRj6Isw")},5494:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var r=s(5155),a=s(2115),i=s(5699),l=s(4236),n=s(1659),o=s(4500),c=s(9598),d=s(6874),u=s.n(d),m=s(283),h=s(6766);let x=[{name:"Home",href:"/"},{name:"Books",href:"/books"},{name:"Sell",href:"/sell"}];function f(){let{user:e,signOut:t}=(0,m.A)();return(0,r.jsx)(i.EN,{as:"nav",className:"bg-gray-900/95 dark:bg-gray-950/90 backdrop-blur-md shadow-lg sticky top-0 z-50",children:s=>{let{open:d}=s;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex h-16 justify-between",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,r.jsx)(u(),{href:"/",className:"text-xl font-bold text-white",children:"BookMarket"})}),(0,r.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:x.map(e=>(0,r.jsx)(u(),{href:e.href,className:"inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-300 hover:text-white transition-colors duration-300",children:e.name},e.name))})]}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:e?(0,r.jsxs)(l.W1,{as:"div",className:"relative ml-3",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(l.W1.Button,{className:"flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-300",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open user menu"}),e.avatar_url?(0,r.jsx)(h.default,{className:"h-8 w-8 rounded-full",src:e.avatar_url,alt:e.full_name,width:32,height:32}):(0,r.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center text-white",children:e.full_name.charAt(0)})]})}),(0,r.jsx)(n.e,{as:a.Fragment,enter:"transition ease-out duration-200",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,r.jsxs)(l.W1.Items,{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-gray-800/95 backdrop-blur-md py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[(0,r.jsx)(l.W1.Item,{children:e=>{let{active:t}=e;return(0,r.jsx)(u(),{href:"/profile",className:"".concat(t?"bg-gray-700/80":""," block px-4 py-2 text-sm text-gray-300 transition-colors duration-300"),children:"Your Profile"})}}),(0,r.jsx)(l.W1.Item,{children:e=>{let{active:t}=e;return(0,r.jsx)(u(),{href:"/books/my-listings",className:"".concat(t?"bg-gray-700/80":""," block px-4 py-2 text-sm text-gray-300 transition-colors duration-300"),children:"My Listings"})}}),(0,r.jsx)(l.W1.Item,{children:e=>{let{active:s}=e;return(0,r.jsx)("button",{onClick:()=>t(),className:"".concat(s?"bg-gray-700/80":""," block w-full text-left px-4 py-2 text-sm text-gray-300 transition-colors duration-300"),children:"Sign out"})}})]})})]}):(0,r.jsx)("div",{className:"flex space-x-4",children:(0,r.jsx)(u(),{href:"/auth",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors duration-300",children:"Sign in"})})}),(0,r.jsx)("div",{className:"-mr-2 flex items-center sm:hidden",children:(0,r.jsxs)(i.EN.Button,{className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white transition-colors duration-300",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open main menu"}),d?(0,r.jsx)(o.A,{className:"block h-6 w-6","aria-hidden":"true"}):(0,r.jsx)(c.A,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})}),(0,r.jsxs)(i.EN.Panel,{className:"sm:hidden",children:[(0,r.jsx)("div",{className:"space-y-1 pb-3 pt-2",children:x.map(e=>(0,r.jsx)(i.EN.Button,{as:u(),href:e.href,className:"block py-2 pl-3 pr-4 text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-300",children:e.name},e.name))}),e?(0,r.jsxs)("div",{className:"border-t border-gray-700 pb-3 pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center px-4",children:[e.avatar_url?(0,r.jsx)(h.default,{className:"h-10 w-10 rounded-full",src:e.avatar_url,alt:e.full_name,width:40,height:40}):(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-600 flex items-center justify-center text-white",children:e.full_name.charAt(0)}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("div",{className:"text-base font-medium text-white",children:e.full_name}),(0,r.jsx)("div",{className:"text-sm font-medium text-gray-400",children:e.email})]})]}),(0,r.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,r.jsx)(i.EN.Button,{as:u(),href:"/profile",className:"block px-4 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors duration-300",children:"Your Profile"}),(0,r.jsx)(i.EN.Button,{as:u(),href:"/books/my-listings",className:"block px-4 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors duration-300",children:"My Listings"}),(0,r.jsx)(i.EN.Button,{as:"button",onClick:()=>t(),className:"block w-full text-left px-4 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white transition-colors duration-300",children:"Sign out"})]})]}):(0,r.jsx)("div",{className:"border-t border-gray-700 pb-3 pt-4",children:(0,r.jsx)("div",{className:"flex items-center px-4",children:(0,r.jsx)(u(),{href:"/auth",className:"block w-full text-center px-4 py-2 text-base font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors duration-300",children:"Sign in"})})})]})]})}})}},8260:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,347,23)),Promise.resolve().then(s.t.bind(s,5356,23)),Promise.resolve().then(s.bind(s,5494)),Promise.resolve().then(s.bind(s,283))}},e=>{var t=t=>e(e.s=t);e.O(0,[444,545,851,874,766,992,441,684,358],()=>t(8260)),_N_E=e.O()}]);